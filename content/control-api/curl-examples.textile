---
title: Examples
meta_description: "The Control API is a REST API that enables you to manage your Ably account programmatically."
meta_keywords: "Ably, Control API, account management, control, REST API, OpenAPI Specification, OAS3."
section: control-api
index: 20
jump_to:
  Help with:
    - Examples - Apps#examples-apps
    - Examples - Reactor rules#examples-rules
    - See also#see-also
---

This topic includes some examples of using the Control API with "Curl":https://curl.se/.

In the code examples, you will need to set the following variables by any convenient method (such as setting the variables in a script, or copying and pasting suitable values directly into the code):

|_. Variable |_. Description |
| ACCOUNT_ID | Your Ably Account ID (see "here":/control-api#account-id) |
| ACCESS_TOKEN | Your Ably access token for the Control API (see "here":/control-api#authentication) |
| APP_ID | The application ID for the application you want to modify (see "here":/control-api#app-id) |

h2(#examples-apps). Applications

You can use the Control API to carry out tasks such as listing and creating applications. Operations available include:

* Get a list of apps
* Create an app
* Update an app
* Delete an app
* Update an app's APNS info 

h3(#examples-apps-list). List your apps

To list all the apps associated with an account:

```[sh]
curl "https://control.ably.net/v1/accounts/${ACCOUNT_ID}/apps" \
     -H "Authorization: Bearer ${ACCESS_TOKEN}" \
     -H "Accept: application/json"
```

Sample response:

```[json]
[
  {
    "id": "28AB6w",
    "name": "Default",
    "status": "enabled",
    "tlsOnly": true,
    "enablePusherCompatibility": false,
    "fcmKey": null,
    "apnsCertificate": null,
    "apnsUseSandboxEndpoint": false
  },
  {
    "id": "dcABrA",
    "name": "TestApp",
    "status": "deleted",
    "tlsOnly": true,
    "enablePusherCompatibility": false,
    "fcmKey": null,
    "apnsCertificate": null,
    "apnsUseSandboxEndpoint": false
  }
]
```

h3(#examples-apps-create). Create an app

To create an app:

```[sh]
curl -X "POST" "https://control.ably.net/v1/accounts/${ACCOUNT_ID}/apps" \
     -H "Authorization: Bearer ${ACCESS_TOKEN}" \
     -H "Accept: application/json" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
  "status": "enabled",
  "tlsOnly": true,
  "enablePusherCompatibility": false,
  "name": "control-api-test-1",
  "setupPusherNamespaces": false
}'
```

See the "API reference":/control-api/api-reference/#tag/apps/paths/~1accounts~1{account_id}~1apps/post for information on the request body.

Sample response:

```[json]
{
  "id": "rA0lav",
  "name": "control-api-test-1",
  "status": "enabled",
  "tlsOnly": true,
  "enablePusherCompatibility": false,
  "fcmKey": null,
  "apnsCertificate": null,
  "apnsUseSandboxEndpoint": false
}
```

h2(#examples-rules). Reactor rules

You can use the Control API to manage Reactor rules. The main operations are:

* List rules
* Create a rule
* Update a rule
* Delete a rule

h3(#examples-rules-list). List rules

To list all rules associated with an app:

```[sh]
curl "https://control.ably.net/v1/apps/${APP_ID}/rules" \
     -H "Authorization: Bearer ${ACCESS_TOKEN}" \
     -H "Accept: application/json"
```

Sample response:

```[json]
[
    {
        "channelFilter": null,
        "enveloped": true,
        "format": "json",
        "keyId": null,
        "source": "channel.message",
        "type": "generic.http",
        "headers": [],
        "target": {
            "url": "https://example.com"
        },
        "id": "UoABlw",
        "version": "1.0",
        "status": 2,
        "created": 1615384160148,
        "modified": 1615384366972,
        "_links": {
            "self": "https://control.ably.net/v1/apps/28AB6w/rules/UoABlw"
        }
    },
    {
        "channelFilter": null,
        "enveloped": false,
        "format": null,
        "keyId": null,
        "source": "channel.message",
        "type": "webhook",
        "headers": [],
        "target": {
            "url": "https://example.com"
        },
        "id": "sHABlQ",
        "version": "1.0",
        "status": 1,
        "created": 1615393843505,
        "modified": 1615393843505,
        "_links": {
            "self": "https://control.ably.net/v1/apps/28AB6w/rules/sHABlQ"
        }
    }
]
```

h3(#examples-rules-create). Create a rule

To create a Reactor rule for an app:

```[sh]
curl -X "POST" "https://control.ably.net/v1/apps/${APP_ID}/rules" \
     -H "Authorization: Bearer ${ACCESS_TOKEN}" \
     -H "Accept: application/json" \
     -H "Content-Type: application/json; charset=utf-8" \
     -d $'{
    "target": {
        "url": "https://example.com"
    },
    "type": "webhook",
    "source": "channel.message",
    "enveloped": false,
    "keyId": null
}'
```

See the "API reference":/control-api/api-reference/#tag/rules/paths/~1apps~1{app_id}~1rules/post for information on the request body.

Sample response:

```[json]
{
    "channelFilter": null,
    "enveloped": false,
    "format": null,
    "keyId": null,
    "source": "channel.message",
    "type": "webhook",
    "headers": [],
    "target": {
        "url": "https://example.com"
    },
    "id": "sH__lQ",
    "version": "1.0",
    "status": 1,
    "created": 1615393843505,
    "modified": 1615393843505,
    "_links": {
        "self": "https://control.ably.net/v1/apps/28GY6w/rules/sH__lQ"
    }
}
```

h2(#see-also). See also

* "Control API Reference":/control-api/api-reference
* "Overview":/control-api
* "Test the API with Postman":/control-api/testing-with-postman
